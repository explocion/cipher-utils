kind: pipeline
type: ssh
name: default
server:
  host:
    from_secret: focs.ji.sjtu.edu.cn:2475
  user: g2
  ssh_key:
    from_secret: sshkey
steps:
  - name: pre-checks
    commands:
      - pwd
      - whoami
      - ls
  - name: compile
    commands:
      - rust.fix
      - cargo build --release
  - name: rust test
    commands:
      - cargo test --release
  - name: test xxtea-cli
    commands:
      - ./test.py xxtea-cli
